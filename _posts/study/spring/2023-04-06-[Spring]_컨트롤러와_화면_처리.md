---
layout: post
title: "[Spring] 컨트롤러와 화면 처리"
subtitle: Spring
date: '2023-04-06 12:40:00 +0900'
category: study
tags: spring web
image:
    path: /assets/img/study_Web/spring/logo.png
---

프로젝트의 컨트롤러를 작성해 화면 처리를 해봅시다.

<!--more-->

* this unordered seed list will be replaced by the toc
{:toc}
<br>
서비스 계층의 구현이 끝났으니 컨트롤러를 작성해 화면을 처리해야 합니다.

---
<br>

# 1. BoardController 작성 및 resources 추가
---
<br>

![1](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/1.png)
<br>

프로잭트 내에 controller 패키지를 추가한 뒤 BoardController를 위의 그림과 같이 작성합니다.<br>
또한 이전에 guestbook에서 사용한 템플릿을 가져와 resources에 추가합니다.<br>

# 2. list.html 작성
---
<br>

![2](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/2.png)
<br>

html 파일들은 guestbook의 내용과 거의 동일하지만 경로와 화면에 표시될 형식을 수정해야합니다.<br>
인텔리제이에서 Ctrl + H를 누르면 나오는 바꾸기 기능을 활용해 guestbook을 board로 모두 바꿉니다.<br>
위의 그림과 같이 게시글 목록에서 보여지는 제목의 형식을 댓글 개수가 보이도록 바꿉니다.<br>

# 3. BoardController list() 작성
---
<br>

![3](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/3m.png)
<br>

list 화면과 매핑될 list()에 getList()를 사용해서 작성합니다.<br>


# 4. list.html 결과
---
<br>

![4](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/4m.png)
<br>

BoardApplication을 실행한 뒤 브라우저에서 '/board/list'를 살펴본 결과 제목과 작성자가 정상적으로 댓글의 개수와 이메일을 보여주고 있는 것을 확인할 수 있습니다.<br>

# 5. 
---
<br>

![5](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/5.png)
<br>

실행 결과를 스텍트레이스를 통해 살펴보면 쿼리문 바깥에 gno > 0과 type과 쿼리문 안쪽에 keyword를 사용한 like문이 and로 처리되는 것을 확인할 수 있습니다.<br>
검색의 결과로 312번 방명록이 검색되었고 검색된 방명록이 하나이기 때문에 목록의 Prev와 Next가 존재하지 않는 것을 알 수 있습니다.<br>

# 6. 
---
<br>

![6](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/6.png)
<br>

브라우저에 type과 keyword를 지정한 url을 작성해 살펴보면 정상적으로 게시글이 검색되는 것을 확인할 수 있습니다.<br>

# 7. 
---
<br>

![7](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/7.png)
<br>

검색 항목을 생성하기 위히 form을 작성합니다.<br>
동일하게 List로 이동하도록 하지만 option과 input을 사용해 type과 keyword가 입력된 채로 출력도록 작성합니다.<br>

# 8. 
---
<br>

![8](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/8.png)
<br>

6번과 동일하게 type과 keyword를 지정한 url을 작성해 살펴보면 option과 input에 작성한 type과 keyword가 적혀있는 것을 확인할 수 있습니다.<br>

# 9. 
---
<br>

![9](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/9.png)
<br>

앞서 list.html에서 작성한 Search 버튼과 Clear 버튼의 이벤트를 처리하는 코드를 작성합니다.<br>
'btn-search'를 클릭하면 검색 타입과 키워드로 1페이지를 검색하도록 작성하고 'btn-clear'를 클릭하면 모든 검색 내용을 삭제한 뒤 목록 페이지로 이동하도록 작성합니다.<br>

# 10. 
---
<br>

![10](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/10.png)
<br>

짤린 부분의 내용은 BoardDTO(bno=101, title=Test, content=register test, writerEmail=user100@testmail.com, writerName=USER100, regDate=2023-04-06T16:14:51, modDate=2023-04-06T16:14:51, replyCount=0) 입니다.<br>

# 11. 
---
<br>

![11](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/11.png)
<br>

브라우저에서 Clear 버튼을 누른 결과 모든 조건이 지워진 뒤 1페이지로 이동하는 것을 확인할 수 있습니다.<br>

# 12. 
---
<br>

![12](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/12.png)
<br>

목록 페이지 하단의 페이지 번호가 검색 후 나온 결과들의 페이지 번호를 출력하도록 코드를 작성합니다.<br>
기존의 하단 페이지 번호의 링크 '/guestbook/list(page = ...)'으로 처리된 부분에 type과 keyword를 추가합니다.


# 13. 
---
<br>

![13](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/13.png)
<br>

gno를 눌러 read 페이지로 가는 것 또한 12번과 같이 type과 keyword를 추가해 처리합니다.<br>

# 14. 
---
<br>

![14](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/14.png)
<br>

목록 페이지 하단의 페이지 번호가 검색 결과를 반영하는지 확인합니다.<br>
글 제목에 10이 들어간 방명록을 조회한 뒤 2번 페이지로 이동한 결과 정상적으로 페이지의 이동에 type과 keyword가 반영된 것을 확인할 수 있습니다.

# 15. 
---
<br>

![15](/assets/img/study_Web/spring/2023-04-06-[Spring]_컨트롤러와_화면_처리/15.png)
<br>

gno 링크를 통한 read 페이지 이동이 검색 조건을 반영하는지 확인합니다.<br>
제목에 wow를 검색한 뒤 read 페이지로 이동한 결과 정상적으로 type과 keyword가 반영된 것을 확인할 수 있습니다.
